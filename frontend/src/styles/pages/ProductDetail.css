/* ================= ProductDetail.css — stable, no flicker, no horizontal scroll ================= */

/* ---- Theme tokens ---- */
:root{
  --border:#e5e7eb;
  --muted:#6b7280;
  --text:#0f172a;
  --danger:#ef4444;
  --primary:#111827;
  --bg:#f8fafc;
  --card:#ffffff;
  --shadow:0 8px 24px rgba(15,23,42,.06);
  --thumb-size:64px;
}

/* ---- Base / Reset ---- */
*{ box-sizing:border-box; min-width:0; } /* tránh con tràn grid/flex */
html,body{
  background:var(--bg);
  overflow-x:hidden;           /* chặn tràn ngang toàn cục */
  color:var(--text);
  text-align:left;
}
body{
  font-family: Arial,"Helvetica Neue",Helvetica,"Segoe UI",Tahoma,sans-serif;
  font-size:15px;
  line-height:1.6;
}

/* Khi JS khoá cuộn overlay: thêm class này vào body.
   JS có thể set --scrollbar-comp = (window.innerWidth - documentElement.clientWidth)px để chống nhảy layout */
body.lock-scroll{
  overflow:hidden !important;
  padding-right: var(--scrollbar-comp, 0px);
}

img{ max-width:100%; height:auto; display:block; }

/* ---- Typography ---- */
h1,h2,h3,h4,h5,h6{ margin:0 0 .5rem; font-weight:600; }
h1{ font-size:24px; letter-spacing:.2px; }
h2{ font-size:22px; }
h3,h4{ font-size:16px; }
.muted{ color:var(--muted); }

/* ---- Wrapper ---- */
.pd-wrap{
  max-width:1200px;
  margin:150px auto;
}
.pd-loading{ padding:24px; text-align:center; }

/* ---- Reveal (stagger: .reveal -> .reveal--in) ---- */
.reveal{
  opacity:.001;
  transform:translateY(18px) scale(.98);
  transition:opacity .45s cubic-bezier(.2,.8,.2,1), transform .45s cubic-bezier(.2,.8,.2,1);
  will-change:opacity, transform;
}
.reveal--in{ opacity:1; transform:translateY(0) scale(1); }
@media (prefers-reduced-motion:reduce){
  .reveal{ opacity:1; transform:none; transition:none; }
}

/* ---- Breadcrumb ---- */
.pd-breadcrumb{
  display:flex; gap:8px; align-items:center;
  font-size:13px; color:#374151; margin-bottom:12px; flex-wrap:wrap;
}
.pd-breadcrumb a{ color:#2563eb; text-decoration:none; }
.pd-breadcrumb a:hover{ text-decoration:underline; }
.pd-breadcrumb span::before{ content:"/"; margin:0 4px; color:#9ca3af; }
.pd-breadcrumb .current{ color:#111827; font-weight:600; }

/* ---- Top layout ---- */
.pd-top{
  display:grid; grid-template-columns:1fr 420px; gap:16px; align-items:start;
}
.pd-top > *{ min-width:0; }          /* ngăn cột đẩy tràn ngang */
@media (max-width:980px){ .pd-top{ grid-template-columns:1fr; } }

/* ---- Gallery (left) ---- */
.pd-gallery{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:16px;
  padding:12px;
  box-shadow:var(--shadow);
}
.pd-gallery__main{
  position:relative;
  border:1px solid var(--border);
  border-radius:14px;
  overflow:hidden;
  background:#fff;
}
.pd-gallery__main img{
  width:100%; height:420px; object-fit:contain;
}
.pd-gallery__nav{
  position:absolute; top:50%; transform:translateY(-50%);
  border:0; width:36px; height:36px; border-radius:50%;
  background:#fff; box-shadow:0 6px 18px rgba(0,0,0,.12);
  cursor:pointer; font-size:22px; line-height:36px; text-align:center;
}
.pd-gallery__nav--left{ left:8px; }
.pd-gallery__nav--right{ right:8px; }

.pd-gallery__thumbs{
  display:flex; gap:8px; padding-top:10px;
  overflow-x:auto; scrollbar-width:thin;
  overscroll-behavior-inline:contain;     /* không kéo lây sang body */
  -webkit-overflow-scrolling:touch;       /* mượt trên iOS */
}
.pd-thumb{
  width:var(--thumb-size); height:var(--thumb-size);
  border:1px solid var(--border); border-radius:12px;
  margin:5px 0; flex:0 0 auto;
  display:flex; align-items:center; justify-content:center;
  cursor:pointer; background:#fff;
}
.pd-thumb img{ width:100%; height:100%; object-fit:contain; padding:6px; }
.pd-thumb.active{ outline:2px solid #3b82f6; }
.pd-thumb--lib{
  width:auto; height:var(--thumb-size);
  padding:0 12px; border-style:dashed; border-radius:10px;
  font-weight:600; color:#374151; display:flex; align-items:center; justify-content:space-around; text-align:center;
}

/* Banner phụ dưới gallery */
.pd-banner{ margin:15px 0; height:200px; }
.pd-banner img{ width:100%; height:100%; object-fit:cover; border-radius:10px; }

/* ---- Stores box ---- */
.pd-stores{
  background:var(--card); border:1px solid var(--border); border-radius:16px;
  margin-top:12px; padding:12px; box-shadow:var(--shadow);
}
.pd-stores h3{ margin:0 0 8px; }
.pd-stores__row{ margin-bottom:8px; }
.pd-stores select{ padding:8px 10px; border:1px solid var(--border); border-radius:10px; outline:none; }
.pd-stores__list{ display:flex; flex-direction:column; gap:8px; margin:10px 0; font-size:14px; }
.pd-stores__list li{ display:flex; gap:8px; align-items:center; }
.pd-stores__list .zalo{ background:#e0f2fe; color:#0369a1; border-radius:999px; padding:2px 8px; font-size:12px; }
.pd-stores__list a{ color:#ef4444; font-weight:700; text-decoration:none; }
.pd-stores__list a:hover{ text-decoration:underline; }
.pd-stores__list .addr{ color:#374151; }
.pd-stores__consult{ border-top:1px dashed var(--border); padding-top:10px; }
.pd-stores__consult-row{ display:flex; gap:8px; margin-top:8px; }
.pd-stores__consult-row input{ flex:1; padding:10px 12px; border:1px solid var(--border); border-radius:10px; outline:none; }

/* B2B */
.pd-b2b{
  margin-top:12px; padding:14px 16px; background:#f8fafc;
  border:1px dashed var(--border); border-radius:12px;
  display:flex; flex-direction:column; gap:6px; text-align:center;
}
.pd-b2b h4{ margin:0; font-size:15px; font-weight:700; color:#0f172a; }
.pd-b2b p{ margin:0; font-size:14px; color:#374151; line-height:1.55; }
.pd-b2b strong{ color:#111827; font-weight:700; }
.pd-b2b a{ color:#2563eb; text-decoration:none; }
.pd-b2b a:hover{ text-decoration:underline; }

/* ---- Right info & buy ---- */
.pd-info{
  position:sticky; top:12px;
  background:var(--card); border:1px solid var(--border); border-radius:16px;
  padding:16px; box-shadow:var(--shadow);
}
.pd-title{ margin:0 0 6px; font-size:22px; font-weight:600; letter-spacing:.2px; }
.pd-rating{ display:flex; gap:10px; align-items:center; color:var(--muted); font-size:14px; }
.pd-rating .stars{ color:#f59e0b; letter-spacing:2px; }
.pd-rating .link{ color:#2563eb; text-decoration:none; }
.pd-rating .link:hover{ text-decoration:underline; }

.pd-prices{
  display:grid; grid-template-columns:auto auto 1fr; align-items:end; gap:10px; margin:12px 0 6px;
}
.pd-old{ color:#9ca3af; text-decoration:line-through; font-weight:600; font-size:14px; }
.pd-old--empty{ visibility:hidden; }
.pd-current{ color:var(--danger); font-weight:800; font-size:24px; letter-spacing:.2px; }
.pd-emi{ justify-self:start; font-size:12px; border:0; background:#fde68a; border-radius:10px; padding:4px 10px; }
.pd-zero{ grid-column:1/-1; color:var(--muted); font-size:12px; }

.pd-variants{ margin:14px 0 6px; }
.v-title{ margin-bottom:6px; color:#111827; font-weight:600; font-size:14px; }
.v-group{ display:flex; flex-wrap:wrap; gap:8px; }

/* chip (hợp nhất 1 rule để tránh hành vi khó đoán) */
.chip{
  display:inline-flex; align-items:center; justify-content:center; gap:8px;
  padding:8px 12px; border:1px solid var(--border); border-radius:12px;
  background:#fff; cursor:pointer; font-size:14px; min-width:60px; text-align:center;
}
.chip img{ width:18px; height:18px; border-radius:4px; object-fit:cover; }
.chip .price-mini{ font-size:12px; color:var(--muted); margin-left:6px; }
.chip.active{ outline:2px solid #ef4444; }

.pd-actions{ display:flex; gap:8px; align-items:center; margin-top:10px; flex-wrap:wrap; }
.qty{
  display:flex; align-items:center; border:1px solid var(--border);
  border-radius:12px; overflow:hidden; background:#fff;
}
.qty button{ width:36px; height:40px; border:0; background:#f3f4f6; cursor:pointer; font-weight:800; }
.qty input{ width:56px; height:40px; border:0; text-align:center; outline:none; font-weight:700; font-size:14px; }

.pd-special-prices{ display:grid; grid-template-columns:1fr 1fr; gap:8px; margin-top:10px; }
.sp-title{ color:var(--muted); font-size:12px; }
.sp-price{ font-weight:800; color:var(--danger); }

/* ---- Promos ---- */
.pd-promos{
  margin-top:12px; background:var(--card); border:1px solid var(--border);
  border-radius:14px; padding:12px;
}
.pd-promos h3{ margin:0 0 8px; }

/* CTA & Trade-in */
.pd-cta{ display:flex; gap:10px; margin-top:10px; flex-wrap:wrap; }
.pd-tradein{
  display:flex; justify-content:space-between; align-items:center;
  background:#fff7ed; border:1px dashed #fdba74; border-radius:12px;
  padding:10px; margin-top:10px;
}
.ti-right{ display:flex; align-items:center; gap:10px; }
.ti-right strong{ color:var(--danger); font-size:18px; }

/* ---- Content + TOC ---- */
.pd-content{
  display:grid; grid-template-columns:260px 1fr; gap:16px; margin-top:16px;
}
.pd-content > *{ min-width:0; }
@media (max-width:980px){ .pd-content{ grid-template-columns:1fr; } }

/* TOC */
.toc{
  background:var(--card); border:1px solid var(--border); border-radius:14px;
  padding:12px; box-shadow:var(--shadow);
}
.toc h3{ margin:0 0 8px; font-weight:700; text-align:left; }
.toc ol{ list-style:none; padding-left:0; margin:0; display:grid; gap:8px; font-size:14px; }
.toc li{ margin:0; }
.toc a{
  display:block; text-decoration:none; color:#202224;
  padding:6px 8px; border-radius:8px; text-align:left;
}
.toc a:hover{ background:#f3f4ff; text-decoration:underline; }
.toc a.is-active{
  font-weight:800; background:#eef2ff; border-left:3px solid #6366f1; padding-left:6px; color:#1d4ed8;
}

/* Article (CMS) */
.article{
  background:var(--card); border:1px solid var(--border); border-radius:14px;
  padding:16px; line-height:1.75; font-size:15px; box-shadow:var(--shadow); text-align:left;
}
.article h3,.article h4{ margin:12px 0 6px; text-align:left; }
.article h3{ font-size:16px; font-weight:700; }
.article h4{ font-size:16px; font-weight:600; }
.article p{ margin:0 0 10px; }
.cms-block{ margin-bottom:14px; }

/* Topics */
.topics-list,.cms-topics{
  list-style:none; margin:8px 0 0; padding:0; display:grid; gap:8px;
}
.topics-list li,.cms-topics li{
  background:#f8fafc; border:1px dashed var(--border); padding:8px 10px; border-radius:10px; color:#0f172a; text-align:left;
}

/* FAQs */
.cms-faqs{ display:grid; gap:8px; }
.faq-item{
  border:1px solid var(--border); background:#fff; border-radius:12px; overflow:hidden;
}
.faq-item>summary{
  cursor:pointer; list-style:none; padding:10px 12px; font-weight:700; color:#111827; text-align:left;
}
.faq-item>summary::-webkit-details-marker{ display:none; }
.faq-a{ padding:0 12px 12px 12px; color:#374151; }
.faq-item[open]{ box-shadow:var(--shadow); }

/* ---- Specs ---- */
.pd-specs{
  background:var(--card); border:1px solid var(--border); border-radius:16px;
  padding:12px; margin-top:16px; box-shadow:var(--shadow); text-align:left;
}
.pd-specs h3{ margin:0 0 12px; font-size:16px; }
.specs-stack{ display:grid; grid-template-columns:1fr 1fr; gap:12px; }
@media (max-width:720px){ .specs-stack{ grid-template-columns:1fr; } }
.spec-row{
  display:flex; align-items:center; justify-content:space-between; gap:12px;
  padding:12px 14px; background:#fafafa; border:1px solid var(--border); border-radius:12px;
}
.spec-label{ flex:0 0 48%; color:var(--muted); font-size:14px; line-height:1.5; word-break:break-word; }
.spec-value{ flex:1 1 auto; text-align:right; color:var(--text); line-height:1.5; word-break:break-word; }
.spec-row:nth-child(odd){ background:#fff; }
.spec-value.updating{ color:#9ca3af; font-weight:600; font-style:italic; }
.pd-specs .btn.block{ margin-top:12px; }
.pd-specs.collapsed .specs-stack{ max-height:240px; overflow:hidden; mask-image:linear-gradient(#000 75%,transparent); }

/* ---- Reviews ---- */
.pd-reviews{
  background:var(--card); border:1px solid var(--border); border-radius:16px;
  padding:12px; margin:16px 0; box-shadow:var(--shadow);
}
.pd-reviews h3{ margin:0 0 10px; }
.rv-summary{ display:grid; grid-template-columns:200px 1fr; gap:16px; align-items:start; }
@media (max-width:640px){ .rv-summary{ grid-template-columns:1fr; } }
.rv-score .score{ font-size:24px; font-weight:800; }
.rv-score .stars{ color:#f59e0b; letter-spacing:2px; }
.rv-score .note{ color:var(--muted); }
.rv-bars{ list-style:none; margin:0; padding:0; display:grid; gap:8px; }
.rv-bars li{ display:grid; grid-template-columns:60px 1fr 90px; align-items:center; gap:8px; }
.rv-bars .bar{ height:8px; background:#f3f4f6; border-radius:999px; overflow:hidden; }
.rv-bars .bar i{ display:block; height:100%; background:#f59e0b; }
.rv-form{
  border-top:1px dashed var(--border); margin-top:12px; padding-top:12px; display:grid; gap:8px;
}
.rv-form__row{ display:grid; grid-template-columns:1fr 1fr; gap:8px; }
@media (max-width:640px){ .rv-form__row{ grid-template-columns:1fr; } }
textarea, input{
  border:1px solid var(--border); border-radius:12px; padding:10px 12px; outline:none; font-size:14px; background:#fff;
}
.stars-input{ color:#f59e0b; font-size:18px; }

/* ---- Buttons ---- */
.btn{ appearance:none; border:0; border-radius:12px; padding:10px 14px; cursor:pointer; }
.btn.primary{ background:var(--primary); color:#fff; }
.btn.danger{ background:var(--danger); color:#fff; }
.btn.outline{ background:#fff; border:1px solid var(--border); }
.btn.small{ padding:6px 10px; }
.btn.block{ width:100%; margin-top:8px; }

/* ---- Utility Card ---- */
.card{ background:var(--card); border:1px solid var(--border); border-radius:16px; padding:12px; box-shadow:var(--shadow); }

/* ---- Promotions grid with icons ---- */
.promo-grid{ display:grid; grid-template-columns:1fr; gap:10px; margin:8px 0 0; padding:0; list-style:none; }
@media (min-width:560px){ .promo-grid{ grid-template-columns:1fr 1fr; } }
@media (min-width:920px){ .promo-grid{ grid-template-columns:1fr 1fr; } }
.promo-item{
  display:flex; align-items:flex-start; gap:10px; padding:10px 12px; background:#fff;
  border:1px solid var(--border); border-radius:12px;
  transition:transform .12s ease, box-shadow .2s ease, border-color .2s ease;
}
.promo-item:hover{ transform:translateY(-1px); box-shadow:var(--shadow); border-color:#dbe3ef; }
.promo-icon{
  width:38px; height:38px; border-radius:10px; flex:0 0 38px; display:flex; align-items:center; justify-content:center;
  background:#eef6ff; color:#2563eb; border:1px solid #dbeafe;
}
.promo-icon svg{ display:block; }
.promo-text{ line-height:1.45; }
.promo-title{ font-weight:700; color:#0f172a; }
.promo-desc{ font-size:14px; color:var(--muted); margin-top:2px; }

/* ---- Helpers ---- */
.pd-wrap ul{ list-style:none; padding-left:0; margin-left:0; }    /* bỏ dấu chấm cho ul */
.pd-wrap ol{ margin:0; padding-left:18px; }                        /* giữ số cho ol */
.dotless{ list-style:none; padding-left:0; margin:0; }
